<html>
   <head>
      <title>VueJs Introduction</title>
      <link rel="shortcut icon" type="image/png" href="images/icons/favicon-16x16.png"/>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.4/css/bulma.min.css">
      <script type = "text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.0/vue.js"></script>
      <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script> 
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      
   </head>
   <body>
      <div id = "intro" style = "text-align:center;">
         <h1>{{ message }}</h1>
      </div>
       
<div id='myapp'>
 
        <!-- Select All records -->
        <input type='button' @click='allRecords()' value='Select All users'>
        <br><br>
        
         <!-- Add new user -->
        <input type='button' @click='addUser()' value='Add new user'>
        <br><br>

        <!-- Select record by ID -->
        <div class="is-pulled-right is-clearfix">
            <input type='text' v-model='userid' placeholder="Enter Userid between 1 - 24">
            <input type='button' @click='recordByID()' value='Select user by ID'>
        </div>
        
        <br><br>
        <!-- List records -->
        <table border='1' width='80%' style='border-collapse: collapse;'>
          <tr>
            <th>UserId</th>
            <th>Username</th>
            <th>Name</th>
            <th>Email</th>
          </tr>

          <tr v-for='user in users'>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
          </tr>
        </table>
 
</div>
       
      <script type = "text/javascript">
         var vue_det = new Vue({
            el: '#intro',
            data: {
               message: 'My first VueJS Task'
            }
         });
     //ajax fetching data with mysql sample    
         var app = new Vue({
            el: '#myapp',
            data: {
              users: "",
              userid: 1,
              action : "fetch"
            },
            methods: {
              allRecords: function(){
                axios.get('fetchUsers.php',{
                     params: {
                       action : "fetch"
                     }
                  })
                .then(function (response) {
                   app.users = response.data;
                })
                .catch(function (error) {
                   console.log(error);
                });
              },
              recordByID: function(){
                if(this.userid > 0){
                  axios.get('fetchUsers.php', {
                     params: {
                       userid: this.userid,
                       action : "fetch"
                     }
                  })
                  .then(function (response) {
                     app.users = response.data;
                  })
                  .catch(function (error) {
                     console.log(error);
                  });
                }
              },
              addUser: function(){
                  location.href = 'addUser.html';
              }
            }
        });
      </script>      
   </body>
</html>